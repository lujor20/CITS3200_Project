{% extends "base.html" %}

{% block head_content %}
<title>ipLocated</title>
<link rel="stylesheet" href="{{ url_for('tool2.static', filename='tool2_styles.css') }}">
<script src="{{ url_for('tool2.static', filename='tool2_scripts.js') }}" defer></script>

{% endblock %}
{% block body_content %}

<!-- loader -->
<div id="loader" class="loader hidden">
    <div class="loader-background"></div>
    <div class="dots-container">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>
    <p id="progressText">Loading...</p> 
</div>

<div class="tool2">
    <!-- Dropzone -->
    <div id="dropzone">
        <p id="drop-text">Drop a CSV file here!</p>
    </div>

    <!-- click prompt -->
    <p id="tablePrompt">Click on a row for map shown!</p>

    <div class="navigation">
        <!-- Search bar -->
        <input type="text" id="searchBar" placeholder="Search by username">

        <!-- buttons -->
        <button class="nav-buttons" id="searchButton">Search</button>
        <button class="nav-buttons" id="downloadButton">Download</button>
        <button class="nav-buttons" id="internationalAnalysis">InternationalAnalysis</button>
        <button class="nav-buttons" id="distanceAnalysis">DistanceAnalysis</button>
        <button class="nav-buttons" id="clearButton">Clean</button>

        <!-- Filter -->
        <select id="filter">
            <option value="all">All</option>
            <option value="domestic">domestic</option>
            <option value="international">international</option>
            <option value="suspicous">suspicous</option>
        </select>
    </div>

    <!-- Table -->
    <table id="csvTable">
        <thead>
            <!-- Headers-->
        </thead>
        <tbody>
            <!-- Data rows-->
        </tbody>
    </table>

    <!-- Modal -->
    <div id="detailsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999;">
        <div style="width: 70%; margin: 5% auto; background: #fff; padding: 20px; border-radius: 5px; overflow-y: auto; max-height: 80vh;">
            <span class="close-button" style="float: right; cursor: pointer;" onclick="closeModal()">&times;</span>
            <h2>Details</h2>
            <div id="userDataContainer"></div>
            <div id="mapContainer" style="height: 400px; max-width: 100%; overflow: hidden;"></div>
        </div>
    </div>
</div>
{% endblock %}

